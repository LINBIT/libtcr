override CFLAGS += @CFLAGS@ -I..
override LDFLAGS += -L../tcr -ltcr -lpthread

TARGETS := main tc_mutex_test1 tc_mutex_test2 tc_waitq_test tc_waitq_test2
TARGETS += tc_waitq_test3 tc_waitq_test5 leak_test leak_test2 yield_test
TARGETS += yield_test1 parallel_for unix_signal tc_thread_dump
TARGETS += pipelined-server tc_rwlock_signal_test rwlock_test tc_sleep_test
TARGETS += 1tc_2events tc_sleep_test tc_waitfd-both-dirs tc_waitfd-close

all: $(TARGETS)

.SUFFIXES: .o

%.o : %.c
	$(CC) -c -o $@ $^ $(CFLAGS)

% : %.o
	$(CC) -o $@ $^ $(LDFLAGS)

clean:
	rm -f *.o $(TARGETS)

$(TARGETS): ../tcr/libtcr.a
